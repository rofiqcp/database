# MongoDB Examples

This folder contains example data, queries, and scripts for the MongoDB Learning Module.

## üìÅ Files

- **sample_data.json** - Sample items data (10 items)
- **query_examples.txt** - Comprehensive MongoDB query examples
- **import_data.sh** - Shell script to import sample data

## üöÄ Quick Start

### Import Sample Data

#### Using the Import Script (Recommended)

```bash
cd examples
./import_data.sh
```

#### Manual Import

```bash
# Import sample data
mongoimport --db=learning_db --collection=items --file=sample_data.json --jsonArray --drop

# Verify import
mongosh
use learning_db
db.items.countDocuments()  # Should return 10
db.items.find().pretty()
```

### Using MongoDB Shell

```bash
# Connect to MongoDB
mongosh

# Switch to learning database
use learning_db

# View all items
db.items.find().pretty()

# Try example queries from query_examples.txt
db.items.find({ category: "Electronics" })
db.items.find({ price: { $gte: 100, $lte: 500 } })
```

## üìù Sample Data Structure

The sample data includes 10 items across different categories:

```javascript
{
  "_id": ObjectId,           // Auto-generated by MongoDB
  "name": String,            // Item name
  "description": String,     // Item description
  "category": String,        // Category (Electronics, Books, etc.)
  "price": Number,           // Price in USD
  "quantity": Number,        // Stock quantity
  "created_at": ISODate,     // Creation timestamp
  "updated_at": ISODate      // Last update timestamp
}
```

**Categories included:**
- Electronics (5 items)
- Furniture (2 items)
- Books (1 item)
- Accessories (1 item)
- Stationery (1 item)

## üîç Query Examples

The `query_examples.txt` file contains over 100 MongoDB query examples including:

### Basic Operations
- Find all documents
- Find by ID
- Count documents
- Find one document

### Filtering
- Comparison operators ($gt, $gte, $lt, $lte, $eq, $ne)
- Logical operators ($and, $or, $not, $nor)
- Array operators ($in, $nin, $all, $size)
- Text search and regex patterns

### Aggregation
- Group by category
- Calculate averages, sums, min, max
- Count by category
- Price range analysis
- Complex aggregation pipelines

### CRUD Operations
- Insert one and many documents
- Update operations ($set, $inc, $mul, $push, $pull)
- Delete operations
- Upsert operations

### Indexes
- Create and drop indexes
- View existing indexes
- Text indexes
- Compound indexes

### Advanced Topics
- Projection (field selection)
- Sorting and pagination
- Explain query plans
- Collection statistics

## üß™ Testing Queries

### Test in MongoDB Shell

```bash
mongosh
use learning_db

# Run any query from query_examples.txt
db.items.find({ category: "Electronics" })
```

### Test via Backend API

```bash
# Get all items
curl http://localhost:3000/api/data

# Search items
curl -X POST http://localhost:3000/api/search \
  -H "Content-Type: application/json" \
  -d '{"query":"laptop","category":"Electronics"}'
```

## üìä Useful Commands

### Export Data

```bash
# Export entire collection
mongoexport --db=learning_db --collection=items --out=backup.json

# Export with query
mongoexport --db=learning_db --collection=items \
  --query='{"category":"Electronics"}' --out=electronics.json
```

### Backup Database

```bash
# Backup database
mongodump --db=learning_db --out=/backup/

# Restore database
mongorestore --db=learning_db /backup/learning_db/
```

### Reset Database

```bash
mongosh
use learning_db
db.items.drop()          # Delete all items
# Then re-import sample data
```

## üí° Learning Path

1. **Start with Basic Queries** (query_examples.txt lines 1-50)
   - Find operations
   - Filtering
   - Sorting

2. **Practice CRUD Operations** (query_examples.txt lines 250-350)
   - Insert
   - Update
   - Delete

3. **Explore Aggregation** (query_examples.txt lines 200-250)
   - Group by
   - Calculate statistics
   - Pipeline operations

4. **Advanced Features** (query_examples.txt lines 350+)
   - Indexes
   - Text search
   - Performance optimization

## üîó Additional Resources

- [MongoDB Manual](https://docs.mongodb.com/manual/)
- [MongoDB Query Operators](https://docs.mongodb.com/manual/reference/operator/query/)
- [Aggregation Pipeline](https://docs.mongodb.com/manual/core/aggregation-pipeline/)
- [MongoDB Indexes](https://docs.mongodb.com/manual/indexes/)

## üêõ Troubleshooting

### Import Fails

```bash
# Check MongoDB is running
mongosh --eval "db.version()"

# Check file exists
ls -la sample_data.json

# Try with verbose output
mongoimport --db=learning_db --collection=items \
  --file=sample_data.json --jsonArray --drop --verbose
```

### Data Not Appearing

```bash
# Verify database and collection
mongosh
show dbs
use learning_db
show collections
db.items.countDocuments()
```

### Connection Issues

```bash
# Check MongoDB status
sudo systemctl status mongod  # Linux
brew services list             # macOS

# Start MongoDB
sudo systemctl start mongod    # Linux
brew services start mongodb-community  # macOS
```

---

**Happy Learning! üéâ**

Explore the query examples and experiment with MongoDB operations.
